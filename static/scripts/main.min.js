"use strict";const millisToMinsAndSecs=e=>{let t=Math.floor(e/6e4),n=Math.floor(e%6e4/1e3);return t>0&&n>0?`${t} min, ${n} sec`:t>0&&0===n?`${t} min`:0===t&n>0?`${n} sec`:void 0},createTable=e=>{let t=document.createElement("table"),n=document.createElement("thead"),r=document.createElement("tr"),a=["Artwork","Artist","Collection","Track","Genre","Duration","Date","Preview",];a.forEach(e=>{let t=document.createElement("th");t.textContent=e,r.appendChild(t)}),n.appendChild(r),t.appendChild(n);let l=document.createElement("tbody");e.forEach(e=>{let t=document.createElement("tr"),n=[`<img src="${e.artworkUrl100}" alt="Artwork" />`,e.artistName,e.collectionName,e.trackName,e.primaryGenreName,millisToMinsAndSecs(parseInt(e.trackTimeMillis)),new Date(String(e.releaseDate)).toLocaleDateString("hr-HR",{day:"numeric",month:"numeric",year:"numeric"}),`<audio controls><source src="${e.previewUrl}" type="audio/aac"></audio>`,];n.forEach(e=>{let n=document.createElement("td");n.innerHTML=e,t.appendChild(n)}),l.appendChild(t)}),t.appendChild(l),document.body.appendChild(t)},removeTable=()=>{let e=document.querySelector("table");e&&e.remove()},updateInfo=e=>{let t=document.getElementById("info");e?t.textContent=e:t.textContent=""},onInputQuery=async e=>{let t=encodeURIComponent(e.target.value.trim());if(""===t){updateInfo("Value can't be empty, please insert your query.");return}updateInfo("Searching...");let n=await fetch(`https://itunes.apple.com/search?entity=song&term=${t}`),r=await n.json();if(0===r.resultCount){updateInfo("No results found.");return}updateInfo(),removeTable(),createTable(r.results)},debounceInput=(e,t)=>{let n;return function(...r){clearTimeout(n),n=setTimeout(()=>{e.apply(this,r)},t)}};document.addEventListener("DOMContentLoaded",()=>document.getElementById("query").addEventListener("input",debounceInput(onInputQuery,500)));